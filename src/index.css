@tailwind base;
@tailwind components;
@tailwind utilities;

@import './styles/zone3-theme.css';

/* ===========================================================================
   D-DIN Font Family (SIL Open Font License)
   =========================================================================== */
@font-face {
  font-family: 'D-DIN';
  src: url('https://cdn.jsdelivr.net/gh/nickonometry/din-fonts@master/D-DIN.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'D-DIN';
  src: url('https://cdn.jsdelivr.net/gh/nickonometry/din-fonts@master/D-DIN-Bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/* =============================================================================
   SYSTEM OF A TOWN — CI/UI DESIGN SYSTEM
   Version: 1.0.0
   Theme: Dark Enterprise Dashboard
   ============================================================================= */

@layer base {
  /* =========================================================================
     LIGHT MODE (Optional fallback - Dark is default)
     ========================================================================= */
  :root {
    /* Core Backgrounds */
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    /* Glass-enabled surfaces with alpha channel */
    --card: 0 0% 100% / 0.8;
    --card-foreground: 222.2 84% 4.9%;
    --card-glass: 0 0% 100% / 0.7;
    --surface-glass: 0 0% 98% / 0.6;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    /* Primary Colors */
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    /* Borders & Inputs */
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;

    /* Radius System — iOS-style larger radii */
    --radius: 1rem;           /* 16px */
    --radius-sm: 0.75rem;     /* 12px */
    --radius-lg: 1.25rem;     /* 20px */
    --radius-xl: 1.5rem;      /* 24px */
    --radius-full: 9999px;

    /* Sidebar */
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;

    /* Status Colors */
    --status-success: 142 71% 45%;
    --status-warn: 38 92% 50%;
    --status-error: 0 84% 60%;
    --status-info: 199 89% 48%;

    /* Surface Layers */
    --surface: 0 0% 98%;
    --surface-2: 0 0% 96%;
    --border-subtle: 214 32% 91%;
    --border-glow: 217 91% 60%;

    /* Text Hierarchy */
    --text-primary: 222 84% 5%;
    --text-secondary: 215 16% 47%;
    --text-dimmed: 215 10% 65%;

    /* Accent (CI Primary - konfigurierbar) */
    --accent-primary: 217 91% 60%;
    --accent-primary-hover: 217 91% 70%;
  }

  /* =========================================================================
     DARK MODE (Dark UI beibehalten; Pergament nur als Seiten-Hintergrund via bg-surface)
     ========================================================================= */
  .dark {
    /* Core Backgrounds - Dark enterprise UI */
    --background: 222 47% 6%;
    --foreground: 210 40% 98%;

    /* Glass-enabled surfaces with alpha channel */
    --card: 222 30% 10% / 0.85;
    --card-foreground: 210 40% 98%;
    --card-glass: 222 47% 6% / 0.7;
    --surface-glass: 222 47% 5% / 0.6;

    --popover: 222 35% 9%;
    --popover-foreground: 210 40% 98%;

    /* Primary Colors */
    --primary: 217 91% 60%;
    --primary-foreground: 222 47% 6%;

    --secondary: 222 30% 14%;
    --secondary-foreground: 210 40% 98%;

    --muted: 222 25% 16%;
    --muted-foreground: 215 20% 65%;

    --accent: 222 30% 14%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62% 50%;
    --destructive-foreground: 210 40% 98%;

    /* Borders & Inputs */
    --border: 222 20% 18%;
    --input: 222 25% 16%;
    --ring: 217 91% 60%;

    /* Sidebar - Dark (Menu bleibt dunkel) */
    --sidebar-background: 222 47% 5%;
    --sidebar-foreground: 210 30% 85%;
    --sidebar-primary: 217 91% 60%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 222 30% 12%;
    --sidebar-accent-foreground: 210 40% 98%;
    --sidebar-border: 222 20% 15%;
    --sidebar-ring: 217 91% 60%;

    /* Status Colors */
    --status-success: 142 71% 45%;
    --status-warn: 38 92% 50%;
    --status-error: 0 84% 60%;
    --status-info: 199 89% 48%;

    /* Surface Layers - Dark enterprise (original) */
    --surface: 222 30% 10%;
    --surface-2: 222 35% 8%;
    --border-subtle: 222 20% 18%;
    --border-glow: 217 50% 35%;

    /* Text Hierarchy */
    --text-primary: 210 40% 98%;
    --text-secondary: 215 20% 65%;
    --text-dimmed: 215 15% 45%;

    /* Accent (CI Primary - konfigurierbar) */
    --accent-primary: 217 91% 60%;
    --accent-primary-hover: 217 91% 70%;
  }
}

/* ===========================================================================
   SPACING SYSTEM (8px base)
   =========================================================================== */
:root {
  --spacing-xs: 0.25rem;   /* 4px */
  --spacing-sm: 0.5rem;    /* 8px */
  --spacing-md: 1rem;      /* 16px */
  --spacing-lg: 1.5rem;    /* 24px */
  --spacing-xl: 2rem;      /* 32px */
  --spacing-2xl: 3rem;     /* 48px */
}

/* ===========================================================================
   SHADOW SYSTEM (Subtle layer separation)
   =========================================================================== */
:root {
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-card: 0 2px 8px -2px rgb(0 0 0 / 0.3);
  --shadow-elevated: 0 4px 16px -4px rgb(0 0 0 / 0.4);
  --shadow-glow: 0 0 20px -5px hsl(var(--accent-primary) / 0.3);
}

.dark {
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.2);
  --shadow-card: 0 2px 8px -2px rgb(0 0 0 / 0.5);
  --shadow-elevated: 0 8px 24px -8px rgb(0 0 0 / 0.6);
  --shadow-glow: 0 0 24px -6px hsl(var(--accent-primary) / 0.4);
}

/* ===========================================================================
   LAYOUT VARIABLES
   =========================================================================== */
:root {
  --sidebar-width: 260px;
  --sidebar-collapsed-width: 56px;
  --chat-panel-width: 280px;
  --header-height: 56px;
}

/* ===========================================================================
   ORBITAL ATMOSPHERIC BACKGROUNDS
   Light Mode: "Atmospheric Sky" — Inspiriert von Revolut
   Dark Mode: "Deep Space" — Inspiriert von SpaceX
   =========================================================================== */
:root {
  --bg-atmosphere: 
    /* Layer 1: Dichte Hauptwolke links-oben */
    radial-gradient(
      ellipse 100% 50% at 20% 20%,
      hsla(0 0% 100% / 0.7) 0%,
      hsla(0 0% 100% / 0.3) 30%,
      transparent 60%
    ),
    /* Layer 2: Zweite Wolkenformation rechts */
    radial-gradient(
      ellipse 70% 45% at 75% 25%,
      hsla(0 0% 100% / 0.6) 0%,
      hsla(0 0% 100% / 0.2) 35%,
      transparent 55%
    ),
    /* Layer 3: Weiche Wolkenschicht Mitte-unten */
    radial-gradient(
      ellipse 120% 40% at 50% 60%,
      hsla(0 0% 100% / 0.4) 0%,
      transparent 50%
    ),
    /* Layer 4: Sonnenschein-Glow von oben (warm) */
    radial-gradient(
      ellipse 80% 60% at 50% -10%,
      hsla(40 70% 90% / 0.3) 0%,
      transparent 50%
    ),
    /* Layer 5: Intensiver Himmelsblau-Gradient */
    radial-gradient(
      ellipse 160% 120% at 50% -40%,
      hsl(195 90% 68%) 0%,
      hsl(200 85% 75%) 25%,
      hsl(205 70% 85%) 50%,
      hsl(210 45% 94%) 80%,
      hsl(210 30% 98%) 100%
    );
}

.dark {
  --bg-atmosphere: 
    /* Layer 1: Große Galaxie-Glow oben-rechts (intensiver) */
    radial-gradient(
      ellipse 80% 70% at 90% 0%,
      hsl(220 60% 18%) 0%,
      hsl(225 50% 12%) 25%,
      hsl(225 40% 6%) 50%,
      transparent 70%
    ),
    /* Layer 2: Blauer Nebel-Akzent oben-links */
    radial-gradient(
      ellipse 50% 40% at 10% 15%,
      hsl(210 50% 14%) 0%,
      hsl(215 40% 8%) 30%,
      transparent 55%
    ),
    /* Layer 3: Violetter Nebel unten-links (kräftiger) */
    radial-gradient(
      ellipse 60% 50% at 5% 100%,
      hsl(275 45% 14%) 0%,
      hsl(270 35% 8%) 30%,
      transparent 60%
    ),
    /* Layer 4: Sekundärer Nebel unten-rechts */
    radial-gradient(
      ellipse 45% 35% at 85% 90%,
      hsl(250 35% 12%) 0%,
      hsl(245 30% 6%) 25%,
      transparent 50%
    ),
    /* Layer 5: Zentraler Sternenstaub-Schimmer */
    radial-gradient(
      ellipse 100% 80% at 50% 40%,
      hsla(220 40% 15% / 0.25) 0%,
      transparent 60%
    ),
    /* Layer 6: Tiefes Weltraum-Schwarz */
    linear-gradient(
      180deg,
      hsl(222 70% 3%) 0%,
      hsl(222 75% 2%) 50%,
      hsl(222 80% 1%) 100%
    );
}

/* ===========================================================================
   BASE STYLES
   =========================================================================== */
@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: 'D-DIN', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
    background: var(--bg-atmosphere);
    min-height: 100vh;
  }

  /* Smooth theme transitions */
  *, *::before, *::after {
    transition: background-color 0.2s ease, border-color 0.2s ease, color 0.15s ease;
  }

  /* Exclude animated elements from theme transitions */
  .no-theme-transition,
  .no-theme-transition * {
    transition: none !important;
  }

  /* Tabular figures for KPI values */
  .tabular-nums {
    font-variant-numeric: tabular-nums;
  }
}

/* ===========================================================================
   TYPOGRAPHY HIERARCHY — ORBITAL Design System
   D-DIN font family with strict hierarchy
   =========================================================================== */
@layer utilities {
  /* H1: App/Page headlines */
  .text-h1 {
    @apply text-2xl font-bold uppercase tracking-wide;
    line-height: 2rem;
  }

  /* H2: Section headlines */
  .text-h2 {
    @apply text-xl font-bold uppercase;
    letter-spacing: 0.02em;
    line-height: 1.75rem;
  }

  /* H3: Subsection headlines */
  .text-h3 {
    @apply text-base font-semibold;
    line-height: 1.5rem;
  }

  /* Body text */
  .text-body {
    @apply text-sm font-normal;
    line-height: 1.375rem;
  }

  /* Small / Labels */
  .text-small {
    @apply text-xs font-normal;
    line-height: 1.125rem;
  }

  /* Micro / Badges */
  .text-micro {
    @apply text-[10px] font-medium uppercase;
    letter-spacing: 0.05em;
    line-height: 0.875rem;
  }

  /* KPI Values */
  .text-kpi {
    @apply text-[1.75rem] font-bold tabular-nums;
    line-height: 2rem;
  }

  .text-kpi-lg {
    @apply text-[2rem] font-bold tabular-nums;
    line-height: 2.25rem;
  }
}

/* ===========================================================================
   UTILITY CLASSES
   =========================================================================== */
@layer utilities {
  /* Text hierarchy utilities */
  .text-hierarchy-primary {
    @apply text-foreground;
  }
  
  .text-hierarchy-secondary {
    color: hsl(var(--text-secondary));
  }
  
  .text-hierarchy-dimmed {
    color: hsl(var(--text-dimmed));
  }

  /* Surface utilities */
  .bg-surface {
    background-color: hsl(var(--surface));
  }
  
  .bg-surface-2 {
    background-color: hsl(var(--surface-2));
  }

  /* Status utilities */
  .text-status-success {
    color: hsl(var(--status-success));
  }
  
  .text-status-warn {
    color: hsl(var(--status-warn));
  }
  
  .text-status-error {
    color: hsl(var(--status-error));
  }
  
  .text-status-info {
    color: hsl(var(--status-info));
  }

  .bg-status-success {
    background-color: hsl(var(--status-success));
  }
  
  .bg-status-warn {
    background-color: hsl(var(--status-warn));
  }
  
  .bg-status-error {
    background-color: hsl(var(--status-error));
  }
  
  .bg-status-info {
    background-color: hsl(var(--status-info));
  }

  /* Border glow effect */
  .border-glow {
    border-color: hsl(var(--border-glow));
  }

  /* Card shadows */
  .shadow-card {
    box-shadow: var(--shadow-card);
  }
  
  .shadow-elevated {
    box-shadow: var(--shadow-elevated);
  }
  
  .shadow-glow {
    box-shadow: var(--shadow-glow);
  }

  /* Safe area for mobile bottom nav */
  .safe-area-inset-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Uppercase Headlines mit leichtem Letter-Spacing */
  .text-headline {
    @apply uppercase tracking-wide;
  }

  /* Atmospheric Background Utility */
  .bg-atmosphere {
    background: var(--bg-atmosphere);
  }

  /* Glassmorphism Utility Classes */
  .glass-card {
    background: hsl(var(--card));
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  .glass-surface {
    background: hsl(var(--surface-glass));
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
  }

  .glass-nav {
    background: hsl(var(--card-glass));
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
  }

  /* ===========================================================================
     iOS GLASS BUTTON STYLE
     =========================================================================== */
  .btn-glass {
    background: hsla(0 0% 100% / 0.5);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid hsla(0 0% 100% / 0.3);
    box-shadow: 
      inset 0 1px 0 hsla(0 0% 100% / 0.2),
      0 1px 3px hsla(0 0% 0% / 0.1);
    transition: background 0.2s ease;
  }

  .btn-glass:hover {
    background: hsla(0 0% 100% / 0.65);
  }

  .dark .btn-glass {
    background: hsla(0 0% 100% / 0.1);
    border-color: hsla(0 0% 100% / 0.1);
  }

  .dark .btn-glass:hover {
    background: hsla(0 0% 100% / 0.18);
  }

  /* ===========================================================================
     ARMSTRONG PLANET — 3D Sphere with Atmospheric Layers
     =========================================================================== */
  .armstrong-planet {
    border-radius: 50%;
    background:
      /* Atmospheric highlight (top-left) */
      radial-gradient(circle at 30% 25%, 
        hsla(195 90% 85% / 0.9) 0%, 
        hsla(200 80% 70% / 0.6) 25%, 
        transparent 50%
      ),
      /* Core glow (bottom-right) */
      radial-gradient(circle at 70% 70%, 
        hsla(210 60% 65% / 0.7) 0%, 
        transparent 40%
      ),
      /* Base color gradient */
      radial-gradient(circle, 
        hsl(200 75% 60%) 0%, 
        hsl(215 70% 45%) 100%
      );
    box-shadow: 
      inset -8px -8px 20px hsla(210 60% 30% / 0.4),
      inset 4px 4px 15px hsla(195 80% 90% / 0.5),
      0 0 30px hsla(200 90% 60% / 0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .armstrong-planet:hover {
    transform: scale(1.05);
    box-shadow: 
      inset -8px -8px 20px hsla(210 60% 30% / 0.4),
      inset 4px 4px 15px hsla(195 80% 90% / 0.5),
      0 0 45px hsla(200 90% 60% / 0.45);
  }

  .dark .armstrong-planet {
    background:
      /* Atmospheric highlight (top-left) — violet nebula */
      radial-gradient(circle at 25% 20%, 
        hsla(275 45% 35% / 0.8) 0%, 
        hsla(250 40% 25% / 0.5) 30%, 
        transparent 50%
      ),
      /* Secondary glow (bottom-right) — blue accent */
      radial-gradient(circle at 75% 75%, 
        hsla(210 50% 30% / 0.6) 0%, 
        transparent 45%
      ),
      /* Base color gradient — deep space purple */
      radial-gradient(circle, 
        hsl(250 40% 25%) 0%, 
        hsl(275 35% 15%) 100%
      );
    box-shadow: 
      inset -6px -6px 18px hsla(275 30% 10% / 0.6),
      inset 3px 3px 12px hsla(275 50% 50% / 0.3),
      0 0 40px hsla(275 45% 40% / 0.25);
  }

  .dark .armstrong-planet:hover {
    box-shadow: 
      inset -6px -6px 18px hsla(275 30% 10% / 0.6),
      inset 3px 3px 12px hsla(275 50% 50% / 0.3),
      0 0 55px hsla(275 45% 40% / 0.4);
  }

  /* ===========================================================================
     iOS INPUT STYLE — Soft tiles without hard borders
     =========================================================================== */
  .input-ios {
    background: hsl(var(--muted) / 0.6);
    border: none;
    border-radius: var(--radius-lg);
    box-shadow: inset 0 2px 4px hsla(0 0% 0% / 0.05);
  }

  .dark .input-ios {
    background: hsl(var(--muted) / 0.4);
  }

  /* ===========================================================================
     iOS FLOATING NAV — Pill-shaped with glass effect
     =========================================================================== */
  .nav-ios-floating {
    background: hsla(0 0% 100% / 0.7);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid hsla(0 0% 100% / 0.3);
    box-shadow: 
      0 4px 20px hsla(0 0% 0% / 0.1),
      inset 0 1px 0 hsla(0 0% 100% / 0.3);
  }

  .dark .nav-ios-floating {
    background: hsla(0 0% 0% / 0.5);
    border-color: hsla(0 0% 100% / 0.08);
    box-shadow: 
      0 4px 20px hsla(0 0% 0% / 0.4),
      inset 0 1px 0 hsla(0 0% 100% / 0.05);
  }

  /* Active indicator pill */
  .nav-active-pill {
    background: hsl(var(--primary));
    border-radius: 9999px;
    width: 4px;
    height: 4px;
  }

  /* ===========================================================================
     NAVIGATION TAB GLASS STYLE — Consistent glass effect for all nav levels
     =========================================================================== */
  .nav-tab-glass {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    background: hsla(0, 0%, 100%, 0.15);
    border: 1px solid hsla(0, 0%, 100%, 0.1);
    box-shadow: inset 0 1px 0 hsla(0, 0%, 100%, 0.1);
    transition: background-color 0.15s, border-color 0.15s;
  }

  .nav-tab-glass:hover {
    background: hsla(0, 0%, 100%, 0.25);
    border-color: hsla(0, 0%, 100%, 0.15);
  }

  .dark .nav-tab-glass {
    background: hsla(0, 0%, 100%, 0.05);
    border-color: hsla(0, 0%, 100%, 0.05);
  }

  .dark .nav-tab-glass:hover {
    background: hsla(0, 0%, 100%, 0.1);
  }
}
