
-- Phase A: Missing composite indexes (tenant_id, created_at)
-- Verified: excluded tables missing either column

-- 1. bank_account_meta: missing basic tenant_id index
CREATE INDEX IF NOT EXISTS idx_bank_account_meta_tenant ON public.bank_account_meta (tenant_id);

-- 2. Composite indexes (tenant_id, created_at)
CREATE INDEX IF NOT EXISTS idx_access_grants_tenant_created ON public.access_grants (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_acq_inbound_messages_tenant_created ON public.acq_inbound_messages (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_acq_mandate_events_tenant_created ON public.acq_mandate_events (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_acq_mandates_tenant_created ON public.acq_mandates (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_acq_offer_activities_tenant_created ON public.acq_offer_activities (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_acq_offer_documents_tenant_created ON public.acq_offer_documents (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_acq_offers_tenant_created ON public.acq_offers (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_acq_outbound_messages_tenant_created ON public.acq_outbound_messages (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_ad_campaigns_tenant_created ON public.ad_campaigns (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_analytics_budget_settings_tenant_created ON public.analytics_budget_settings (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_analytics_category_overrides_tenant_created ON public.analytics_category_overrides (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_analytics_notes_tenant_created ON public.analytics_notes (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_applicant_liabilities_tenant_created ON public.applicant_liabilities (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_applicant_profiles_tenant_created ON public.applicant_profiles (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_applicant_property_assets_tenant_created ON public.applicant_property_assets (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_armstrong_command_events_tenant_created ON public.armstrong_command_events (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_bank_account_meta_tenant_created ON public.bank_account_meta (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_bank_transactions_tenant_created ON public.bank_transactions (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_billing_usage_tenant_created ON public.billing_usage (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_calendar_events_tenant_created ON public.calendar_events (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_cars_claims_tenant_created ON public.cars_claims (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_cars_financing_tenant_created ON public.cars_financing (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_cars_insurances_tenant_created ON public.cars_insurances (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_cars_logbook_connections_tenant_created ON public.cars_logbook_connections (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_cars_offers_tenant_created ON public.cars_offers (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_cars_trips_tenant_created ON public.cars_trips (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_cars_vehicles_tenant_created ON public.cars_vehicles (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_case_events_tenant_created ON public.case_events (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_cases_tenant_created ON public.cases (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_commissions_tenant_created ON public.commissions (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_consumer_loan_cases_tenant_created ON public.consumer_loan_cases (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_contact_candidates_tenant_created ON public.contact_candidates (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_contact_conversations_tenant_created ON public.contact_conversations (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_contact_staging_tenant_created ON public.contact_staging (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_contacts_tenant_created ON public.contacts (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_context_members_tenant_created ON public.context_members (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_contract_candidates_tenant_created ON public.contract_candidates (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_credibility_flags_tenant_created ON public.credibility_flags (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_credit_ledger_tenant_created ON public.credit_ledger (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_customer_projects_tenant_created ON public.customer_projects (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_data_event_ledger_tenant_created ON public.data_event_ledger (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_dev_project_documents_tenant_created ON public.dev_project_documents (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_dev_project_reservations_tenant_created ON public.dev_project_reservations (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_dev_project_units_tenant_created ON public.dev_project_units (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_dev_projects_tenant_created ON public.dev_projects (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_developer_contexts_tenant_created ON public.developer_contexts (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_document_checklist_items_tenant_created ON public.document_checklist_items (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_document_chunks_tenant_created ON public.document_chunks (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_document_links_tenant_created ON public.document_links (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_document_reminders_tenant_created ON public.document_reminders (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_documents_tenant_created ON public.documents (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_dossier_research_jobs_tenant_created ON public.dossier_research_jobs (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_extractions_tenant_created ON public.extractions (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_finance_cases_tenant_created ON public.finance_cases (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_finance_documents_tenant_created ON public.finance_documents (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_finance_mandates_tenant_created ON public.finance_mandates (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_finance_packages_tenant_created ON public.finance_packages (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_finance_requests_tenant_created ON public.finance_requests (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_finance_submission_logs_tenant_created ON public.finance_submission_logs (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_hosting_contracts_tenant_created ON public.hosting_contracts (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_household_persons_tenant_created ON public.household_persons (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_inbound_attachments_tenant_created ON public.inbound_attachments (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_inbound_emails_tenant_created ON public.inbound_emails (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_inbound_mailboxes_tenant_created ON public.inbound_mailboxes (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_inbox_sort_containers_tenant_created ON public.inbox_sort_containers (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_inbox_sort_rules_tenant_created ON public.inbox_sort_rules (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_insurance_contract_links_tenant_created ON public.insurance_contract_links (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_insurance_contracts_tenant_created ON public.insurance_contracts (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_integration_registry_tenant_created ON public.integration_registry (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_lead_assignments_tenant_created ON public.lead_assignments (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_leads_tenant_created ON public.leads (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_memberships_tenant_created ON public.memberships (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_msv_templates_tenant_created ON public.msv_templates (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_partner_pipelines_tenant_created ON public.partner_pipelines (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_properties_tenant_created ON public.properties (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_property_features_tenant_created ON public.property_features (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_property_financing_tenant_created ON public.property_financing (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_pv_connectors_tenant_created ON public.pv_connectors (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_self_disclosures_tenant_created ON public.self_disclosures (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_storage_nodes_tenant_created ON public.storage_nodes (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_subscriptions_tenant_created ON public.subscriptions (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_tenant_tile_activation_tenant_created ON public.tenant_tile_activation (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_units_tenant_created ON public.units (tenant_id, created_at);
CREATE INDEX IF NOT EXISTS idx_user_consents_tenant_created ON public.user_consents (tenant_id, created_at);
