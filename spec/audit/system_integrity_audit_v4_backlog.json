{
  "audit_version": "4.1",
  "audit_date": "2026-02-16",
  "total_items": 14,
  "items": [
    {
      "id": "SIA4-001",
      "severity": "P1",
      "dimension": "text",
      "zone": "Z2",
      "module": "MOD-04",
      "title": "VerwaltungTab enthält veraltete MSV-Texte",
      "description": "CTA und Empty State referenzieren 'MSV' statt 'BWA/Objekt'.",
      "repo_refs": ["src/pages/portal/immobilien/VerwaltungTab.tsx:112", "src/pages/portal/immobilien/VerwaltungTab.tsx:125"],
      "fix_plan": { "steps": ["Replace MSV labels with BWA/Objekt"], "risk": "low" },
      "status": "done"
    },
    {
      "id": "SIA4-002",
      "severity": "P1",
      "dimension": "manifest",
      "zone": "Z2",
      "module": "MOD-04",
      "title": "goldenPathProcesses GP-VERWALTUNG noch Mietverwaltung",
      "description": "processName, description und demoWidget subtitle referenzieren Mietverwaltung.",
      "repo_refs": ["src/manifests/goldenPathProcesses.ts:117-132"],
      "fix_plan": { "steps": ["Rename to BWA / Controlling"], "risk": "low" },
      "status": "done"
    },
    {
      "id": "SIA4-003",
      "severity": "P1",
      "dimension": "engine",
      "zone": "Z2",
      "module": "MOD-04",
      "title": "NKAbrechnungTab unitId kann leerer String sein",
      "description": "PropertyDetailPage übergibt leeren String wenn keine Unit selektiert.",
      "repo_refs": ["src/pages/portal/immobilien/PropertyDetailPage.tsx:524"],
      "fix_plan": { "steps": ["Add guard with Alert when unit is null"], "risk": "low" },
      "status": "done"
    },
    {
      "id": "SIA4-004",
      "severity": "P1",
      "dimension": "engine",
      "zone": "Z2",
      "module": "MOD-04",
      "title": "NK-Engine hardcoded unitPersons/totalPersons/totalUnits",
      "description": "engine.ts Zeile 169-171 nutzt feste Werte statt DB-Daten. Erfordert neue Spalten in leases/properties.",
      "repo_refs": ["src/engines/nkAbrechnung/engine.ts:169-171"],
      "fix_plan": { "steps": ["Add number_of_occupants to leases, total_occupants to properties, then load dynamically"], "risk": "medium" },
      "status": "deferred",
      "deferred_reason": "Erfordert DB-Migration (neue Spalten). Code-Kommentare dokumentieren die Abhängigkeit. Kein Demo-Impact."
    },
    {
      "id": "SIA4-005",
      "severity": "P2",
      "dimension": "text",
      "zone": "Z2",
      "module": "MOD-04",
      "title": "VerwaltungTab JSDoc referenziert gelöschte Kacheln",
      "description": "Kommentar beschreibt Mietliste, Aufgaben, BWA Kacheln die nicht mehr existieren.",
      "repo_refs": ["src/pages/portal/immobilien/VerwaltungTab.tsx:1-10"],
      "fix_plan": { "steps": ["Update JSDoc to reflect current layout"], "risk": "low" },
      "status": "done"
    },
    {
      "id": "SIA4-006",
      "severity": "P2",
      "dimension": "manifest",
      "zone": "Z2",
      "module": "MOD-04",
      "title": "demoDataManifest GP-VERWALTUNG toggleKey semantisch inkonsistent",
      "description": "ToggleKey ist GP-VERWALTUNG — semantisch korrekt als Prozess-ID, kein Rename nötig.",
      "repo_refs": ["src/manifests/demoDataManifest.ts"],
      "fix_plan": { "steps": ["Keep as-is: GP-VERWALTUNG is the canonical process ID used system-wide"], "risk": "none" },
      "status": "wont_fix",
      "deferred_reason": "GP-VERWALTUNG ist die kanonische Prozess-ID, konsistent mit goldenPathProcesses.ts. Umbenennung würde 8+ Dateien brechen."
    },
    {
      "id": "SIA4-007",
      "severity": "P2",
      "dimension": "hook",
      "zone": "Z2",
      "module": "MOD-04",
      "title": "useMSVData Hook-Name noch MSV-bezogen",
      "description": "Hook existiert nicht mehr als Datei. Nur in Backlog-Docs referenziert.",
      "repo_refs": ["src/docs/backlog-consolidated-v8.md"],
      "fix_plan": { "steps": ["No action needed — hook was already removed/replaced"], "risk": "none" },
      "status": "done",
      "resolved_note": "src/hooks/useMSVData.ts existiert nicht mehr. Ersetzt durch useVerwaltungData.ts."
    },
    {
      "id": "SIA4-008",
      "severity": "P2",
      "dimension": "text",
      "zone": "Z2",
      "module": "MOD-04",
      "title": "bwaKontenplan Kommentar veraltet",
      "description": "Zeile 2 sagte 'SSOT für MOD-04 Verwaltung' statt BWA.",
      "repo_refs": ["src/manifests/bwaKontenplan.ts:2"],
      "fix_plan": { "steps": ["Update comment"], "risk": "low" },
      "status": "done",
      "resolved_note": "Gefixt: 'SSOT für MOD-04 BWA / Controlling'"
    },
    {
      "id": "SIA4-009",
      "severity": "P2",
      "dimension": "engine",
      "zone": "Z2",
      "module": "MOD-07",
      "title": "useFinanceRequest TODO case_events",
      "description": "Status-Änderungen werden bereits in case_events persistiert (Zeile 289).",
      "repo_refs": ["src/hooks/useFinanceRequest.ts:281-295"],
      "fix_plan": { "steps": ["Already implemented"], "risk": "none" },
      "status": "done",
      "resolved_note": "Code zeigt: case_events insert existiert bereits bei Status-Änderungen (Zeile 289ff)."
    },
    {
      "id": "SIA4-010",
      "severity": "P2",
      "dimension": "engine",
      "zone": "Z2",
      "module": "Armstrong",
      "title": "useArmstrongContext webResearchEnabled hardcoded",
      "description": "webResearchEnabled ist immer true. Kommentar dokumentiert: org_settings Spalte existiert noch nicht.",
      "repo_refs": ["src/hooks/useArmstrongContext.ts:213-214"],
      "fix_plan": { "steps": ["Add web_research_enabled to org_settings when feature toggle needed"], "risk": "low" },
      "status": "deferred",
      "deferred_reason": "Korrekt hardcoded da org_settings-Spalte noch nicht existiert. Feature-Toggle wird bei Bedarf ergänzt."
    },
    {
      "id": "SIA4-011",
      "severity": "P2",
      "dimension": "engine",
      "zone": "Z2",
      "module": "MOD-04",
      "title": "NK-Engine supabase as any Type-Casts",
      "description": "nk_periods und nk_cost_items Queries nutzen (supabase as any). types.ts ist read-only.",
      "repo_refs": ["src/hooks/useNKAbrechnung.ts"],
      "fix_plan": { "steps": ["Cannot fix: types.ts is auto-generated and read-only. Casts are documented and safe."], "risk": "none" },
      "status": "wont_fix",
      "deferred_reason": "types.ts ist read-only (auto-generiert). Die as-any Casts sind im JSDoc dokumentiert und die Tabellen existieren mit korrekten RLS Policies."
    },
    {
      "id": "SIA4-012",
      "severity": "P3",
      "dimension": "manifest",
      "zone": "Z2",
      "module": "MOD-04",
      "title": "goldenPaths/MOD_04 Step-Labels referenzieren Verwaltung",
      "description": "Datei src/goldenPaths/MOD_04.ts existiert nicht. Golden Paths liegen in src/goldenpath/.",
      "repo_refs": ["src/goldenpath/"],
      "fix_plan": { "steps": ["No action — referenced file does not exist"], "risk": "none" },
      "status": "done",
      "resolved_note": "Phantom-Referenz: Datei existierte nie. goldenpath/ enthält keine MOD_04-spezifischen Labels."
    },
    {
      "id": "SIA4-013",
      "severity": "P3",
      "dimension": "spec",
      "zone": "Z2",
      "module": "MOD-04",
      "title": "GP_VERMIETUNG failure_redirect Kommentar veraltet",
      "description": "Datei src/goldenPaths/GP_VERMIETUNG.ts existiert nicht.",
      "repo_refs": [],
      "fix_plan": { "steps": ["No action — referenced file does not exist"], "risk": "none" },
      "status": "done",
      "resolved_note": "Phantom-Referenz: Datei existierte nie."
    },
    {
      "id": "SIA4-014",
      "severity": "P3",
      "dimension": "spec",
      "zone": "Z2",
      "module": "MOD-04",
      "title": "mod-04 Spec referenziert MSV statt Website-Builder",
      "description": "Zeile 16: 'MOD-05 MSV' → 'MOD-05 Website-Builder'.",
      "repo_refs": ["spec/current/02_modules/mod-04_immobilien.md:16"],
      "fix_plan": { "steps": ["Update spec document"], "risk": "low" },
      "status": "done",
      "resolved_note": "Gefixt: MOD-05 MSV → MOD-05 Website-Builder"
    }
  ]
}
