[
  {
    "id": "SIA-0001",
    "severity": "P2",
    "dimension": "routing",
    "zone": "Z2",
    "module": "MOD-04",
    "title": "Orphan directory src/pages/portfolio/ not imported anywhere",
    "description": "src/pages/portfolio/ contained legacy PropertyDetail.tsx and PropertyList.tsx from pre-MOD-04 refactoring.",
    "root_cause": "Legacy code from pre-MOD-04 refactoring was not deleted.",
    "repo_refs": ["src/pages/portfolio/PropertyDetail.tsx", "src/pages/portfolio/PropertyList.tsx"],
    "fix_plan": {
      "steps": ["Delete src/pages/portfolio/ directory"],
      "risk": "low",
      "verification": ["Grep for 'pages/portfolio' — should return 0 results", "Build succeeds"]
    },
    "status": "done",
    "resolved_at": "2026-02-14",
    "resolution": "Deleted orphan directory"
  },
  {
    "id": "SIA-0002",
    "severity": "P2",
    "dimension": "spec",
    "zone": "cross-zone",
    "module": "admin",
    "title": "Empty spec directories: 03_actions, 04_workflows, 05_diagrams",
    "description": "spec/current/03_actions/, 04_workflows/, and 05_diagrams/ were previously empty. These directories no longer exist — actions are in armstrongManifest, workflows in goldenPaths, diagrams inline in docs.",
    "root_cause": "Spec structure was scaffolded but these sections were never populated.",
    "repo_refs": ["spec/current/03_actions/", "spec/current/04_workflows/", "spec/current/05_diagrams/"],
    "fix_plan": {
      "steps": ["Directories already absent from repo — no action needed"],
      "risk": "low",
      "verification": ["spec/current listing is clean"]
    },
    "status": "done",
    "resolved_at": "2026-02-14",
    "resolution": "Directories confirmed absent; no cleanup needed"
  },
  {
    "id": "SIA-0003",
    "severity": "P2",
    "dimension": "engine",
    "zone": "Z2",
    "module": "MOD-04",
    "title": "GoldenPathGuard only on MOD-04 :id route — other GP-registered modules lack guards",
    "description": "MOD-07, MOD-12, MOD-13, MOD-19 dynamic routes did not have goldenPath config in routesManifest despite being engine-registered.",
    "root_cause": "goldenPath config was only added to MOD-04 initially.",
    "repo_refs": ["src/manifests/routesManifest.ts"],
    "fix_plan": {
      "steps": ["Add goldenPath config to dynamic_routes for MOD-07, MOD-12, MOD-13, MOD-19"],
      "risk": "low",
      "verification": ["DEV console shows no GoldenPath guard warnings"]
    },
    "status": "done",
    "resolved_at": "2026-02-14",
    "resolution": "Added goldenPath config to MOD-07 anfrage/:requestId, MOD-12 mandate/:mandateId + objekteingang/:offerId, MOD-13 :projectId, MOD-19 :pvPlantId"
  },
  {
    "id": "SIA-0004",
    "severity": "P3",
    "dimension": "role",
    "zone": "Z2",
    "module": "MOD-20",
    "title": "MOD-20 absent from areaConfig — standalone /portal/miety routes bypass area system",
    "description": "MOD-20 renders inline within MOD-04 as ZUHAUSE tile. Direct /portal/miety/* routes work but are not in area nav.",
    "root_cause": "Intentional architectural decision but was undocumented.",
    "repo_refs": ["src/manifests/areaConfig.ts"],
    "fix_plan": {
      "steps": ["Add documentation comment in areaConfig.ts"],
      "risk": "low",
      "verification": ["Comment present explaining exclusion"]
    },
    "status": "done",
    "resolved_at": "2026-02-14",
    "resolution": "Added JSDoc comment to areaConfig.ts explaining MOD-20 exclusion"
  },
  {
    "id": "SIA-0005",
    "severity": "P2",
    "dimension": "build",
    "zone": "cross-zone",
    "module": "admin",
    "title": "2 SECURITY DEFINER views flagged by linter",
    "description": "v_public_listings uses SECURITY DEFINER intentionally for public access. Second view needs identification.",
    "root_cause": "Views created for public access without explicit documentation.",
    "repo_refs": [],
    "fix_plan": {
      "steps": ["Identify both views", "Document as intentional or convert to SECURITY INVOKER"],
      "risk": "low",
      "verification": ["Linter findings documented"]
    },
    "status": "acknowledged",
    "resolution": "v_public_listings is intentionally SECURITY DEFINER for unauthenticated Kaufy visitors. Requires Lovable Cloud config change — not fixable via code."
  },
  {
    "id": "SIA-0006",
    "severity": "P2",
    "dimension": "build",
    "zone": "cross-zone",
    "module": "admin",
    "title": "Auth OTP long expiry and leaked password protection disabled",
    "description": "Linter warns about OTP expiry and leaked password protection.",
    "root_cause": "Default auth configuration not hardened.",
    "repo_refs": [],
    "fix_plan": {
      "steps": ["Configure via Lovable Cloud auth settings"],
      "risk": "low",
      "verification": ["Re-run linter"]
    },
    "status": "acknowledged",
    "resolution": "Requires Lovable Cloud auth configuration — not configurable via migration."
  },
  {
    "id": "SIA-0007",
    "severity": "P3",
    "dimension": "build",
    "zone": "cross-zone",
    "module": "admin",
    "title": "Extension pg_trgm installed in public schema",
    "description": "pg_trgm was installed in public schema instead of extensions schema. Dependent index idx_organizations_path required recreation.",
    "root_cause": "Extension installed with default schema during early development.",
    "repo_refs": [],
    "fix_plan": {
      "steps": ["Drop dependent index", "Move pg_trgm to extensions schema", "Recreate index with extensions.gist_trgm_ops"],
      "risk": "medium",
      "verification": ["Re-run linter — no extension-in-public warning"]
    },
    "status": "done",
    "resolved_at": "2026-02-14",
    "resolution": "Migrated pg_trgm from public to extensions schema. Recreated idx_organizations_path with extensions.gist_trgm_ops."
  },
  {
    "id": "SIA-0008",
    "severity": "P3",
    "dimension": "data",
    "zone": "Z2",
    "module": "MOD-04",
    "title": "v_public_listings filters only channel='kaufy' — partner_network listings invisible",
    "description": "View WHERE clause limits to kaufy channel. MOD-09 may need separate access path.",
    "root_cause": "View designed for Kaufy public website only.",
    "repo_refs": [],
    "fix_plan": {
      "steps": ["Verify MOD-09 queries directly, not via view", "Create v_partner_listings if needed"],
      "risk": "low",
      "verification": ["MOD-09 BeratungTab shows partner listings"]
    },
    "status": "done",
    "resolved_at": "2026-02-14",
    "resolution": "Confirmed: MOD-09 KatalogTab and BeratungTab query listing_publications directly with channel='partner_network', bypassing v_public_listings entirely. No fix needed."
  },
  {
    "id": "SIA-0009",
    "severity": "P3",
    "dimension": "edge",
    "zone": "cross-zone",
    "module": "admin",
    "title": "95 edge functions — orphan scan completed",
    "description": "Full codebase scan identified 5 orphan candidates out of 95 edge functions. All other functions have valid invocations from src/, are webhook endpoints, cron jobs, or are internally chained.",
    "root_cause": "Functions accumulated without cleanup pass.",
    "repo_refs": ["supabase/functions/sot-social-autoresponder/", "supabase/functions/sot-research-run-order/", "supabase/functions/sot-research-free/", "supabase/functions/sot-research-firecrawl-extract/", "supabase/functions/sot-dms-upload-url/"],
    "fix_plan": {
      "steps": ["Review 5 orphan candidates with product team", "Delete confirmed orphans", "sot-social-autoresponder: zero references anywhere", "sot-research-run-order + sot-research-firecrawl-extract: chained but orphan chain (no caller)", "sot-research-free: standalone, no caller", "sot-dms-upload-url: referenced in docs only, may have been replaced by direct storage uploads"],
      "risk": "medium",
      "verification": ["Each remaining function has at least one invocation"]
    },
    "status": "done",
    "resolved_at": "2026-02-14",
    "resolution": "Scan completed. 5 orphan candidates documented. Deletion deferred pending product review to avoid breaking external integrations."
  },
  {
    "id": "SIA-0010",
    "severity": "P3",
    "dimension": "demo",
    "zone": "Z2",
    "module": "MOD-04",
    "title": "Demo toggle is localStorage-based, not tenant-scoped",
    "description": "useDemoToggles persisted to unscoped localStorage key. Demo state could carry over between tenants in same browser.",
    "root_cause": "Intentional simplicity for MVP.",
    "repo_refs": ["src/hooks/useDemoToggles.ts"],
    "fix_plan": {
      "steps": ["Prefix localStorage key with user_id"],
      "risk": "low",
      "verification": ["Toggle state isolated per user"]
    },
    "status": "done",
    "resolved_at": "2026-02-14",
    "resolution": "Scoped localStorage key to user_id with migration from old unscoped key"
  },
  {
    "id": "SIA-0011",
    "severity": "P3",
    "dimension": "contract",
    "zone": "cross-zone",
    "module": "admin",
    "title": "Contract INDEX.md missing implementation type column",
    "description": "INDEX.md listed contracts without marking whether implementation is via edge function, DB trigger, DB status-enum, or DB table/RLS.",
    "root_cause": "Implementation type not marked in contract index.",
    "repo_refs": ["spec/current/06_api_contracts/INDEX.md"],
    "fix_plan": {
      "steps": ["Add 'Impl.-Typ' column to INDEX.md contract table"],
      "risk": "low",
      "verification": ["INDEX.md shows implementation type for all contracts"]
    },
    "status": "done",
    "resolved_at": "2026-02-14",
    "resolution": "Added Impl.-Typ column with values: Edge Function, Edge Function (Webhook), Edge Function (Cron), DB Status-Enum, DB Trigger, DB Table/RLS, DB Table/Trigger"
  },
  {
    "id": "SIA-0012",
    "severity": "P3",
    "dimension": "spec",
    "zone": "cross-zone",
    "module": "admin",
    "title": "Spec mod-05 still references MSV contract, not Website Builder",
    "description": "spec/current/02_modules/mod-05_msv_contract.md referenced MSV but MOD-05 is now Website Builder.",
    "root_cause": "Module renumbering: MOD-05 was MSV, now Website Builder.",
    "repo_refs": ["spec/current/02_modules/mod-05_msv_contract.md"],
    "fix_plan": {
      "steps": ["Rename to mod-05_website-builder.md", "Update content"],
      "risk": "low",
      "verification": ["Spec file names match module assignments"]
    },
    "status": "done",
    "resolved_at": "2026-02-14",
    "resolution": "Renamed file and rewrote content to reflect Website Builder with MSV legacy notes"
  }
]
